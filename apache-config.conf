ServerName adnd2e

# Apache performance settings
TimeOut 60
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 5

# Work with Traefik
ServerTokens Prod
ServerSignature Off

# Accept forwarded protocol from Traefik
SetEnvIf X-Forwarded-Proto "^https$" HTTPS=on

# Enable compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
    BrowserMatch ^Mozilla/4 gzip-only-text/html
    BrowserMatch ^Mozilla/4\.0[678] no-gzip
    BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
</IfModule>

# Cache control for static assets
<FilesMatch "\.(ico|pdf|jpg|jpeg|png|gif|js|css)$">
    Header set Cache-Control "max-age=604800, public"
</FilesMatch>

# Security headers
Header always set X-Content-Type-Options "nosniff"
Header always set X-XSS-Protection "1; mode=block"
Header always set X-Frame-Options "SAMEORIGIN"

# Enable directory permissions
<Directory /var/www/html>
    Options FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>
